{"ast":null,"code":"//\n// charts.js\n// Theme module\n//\n'use strict';\n\n(function () {\n  //\n  // Variables\n  //\n  var colors = {\n    gray: {\n      300: '#E3EBF6',\n      600: '#95AAC9',\n      700: '#6E84A3',\n      800: '#152E4D',\n      900: '#283E59'\n    },\n    primary: {\n      100: '#D2DDEC',\n      300: '#A6C5F7',\n      700: '#2C7BE5'\n    },\n    black: '#12263F',\n    white: '#FFFFFF',\n    transparent: 'transparent'\n  };\n  var fonts = {\n    base: 'Cerebri Sans'\n  };\n  var toggle = document.querySelectorAll('[data-toggle=\"chart\"]');\n  var legend = document.querySelectorAll('[data-toggle=\"legend\"]'); //\n  // Functions\n  //\n\n  function globalOptions() {\n    // Global\n    Chart.defaults.global.responsive = true;\n    Chart.defaults.global.maintainAspectRatio = false; // Default\n\n    Chart.defaults.global.defaultColor = colors.gray[600];\n    Chart.defaults.global.defaultFontColor = colors.gray[600];\n    Chart.defaults.global.defaultFontFamily = fonts.base;\n    Chart.defaults.global.defaultFontSize = 13; // Layout\n\n    Chart.defaults.global.layout.padding = 0; // Legend\n\n    Chart.defaults.global.legend.display = false;\n    Chart.defaults.global.legend.position = 'bottom';\n    Chart.defaults.global.legend.labels.usePointStyle = true;\n    Chart.defaults.global.legend.labels.padding = 16; // Point\n\n    Chart.defaults.global.elements.point.radius = 0;\n    Chart.defaults.global.elements.point.backgroundColor = colors.primary[700]; // Line\n\n    Chart.defaults.global.elements.line.tension = .4;\n    Chart.defaults.global.elements.line.borderWidth = 3;\n    Chart.defaults.global.elements.line.borderColor = colors.primary[700];\n    Chart.defaults.global.elements.line.backgroundColor = colors.transparent;\n    Chart.defaults.global.elements.line.borderCapStyle = 'rounded'; // Rectangle\n\n    Chart.defaults.global.elements.rectangle.backgroundColor = colors.primary[700]; // Arc\n\n    Chart.defaults.global.elements.arc.backgroundColor = colors.primary[700];\n    Chart.defaults.global.elements.arc.borderColor = colors.white;\n    Chart.defaults.global.elements.arc.borderWidth = 4;\n    Chart.defaults.global.elements.arc.hoverBorderColor = colors.white; // Tooltips\n\n    Chart.defaults.global.tooltips.enabled = false;\n    Chart.defaults.global.tooltips.mode = 'index';\n    Chart.defaults.global.tooltips.intersect = false;\n\n    Chart.defaults.global.tooltips.custom = function (model) {\n      var tooltip = document.getElementById('chart-tooltip');\n\n      if (!tooltip) {\n        tooltip = document.createElement('div');\n        tooltip.setAttribute('id', 'chart-tooltip');\n        tooltip.setAttribute('role', 'tooltip');\n        tooltip.classList.add('popover');\n        tooltip.classList.add('bs-popover-top');\n        document.body.appendChild(tooltip);\n      }\n\n      if (model.opacity === 0) {\n        tooltip.style.visibility = 'hidden';\n        return;\n      }\n\n      function getBody(bodyItem) {\n        return bodyItem.lines;\n      }\n\n      if (model.body) {\n        var titleLines = model.title || [];\n        var bodyLines = model.body.map(getBody);\n        var html = '';\n        html += '<div class=\"arrow\"></div>';\n        titleLines.forEach(function (title) {\n          html += '<h3 class=\"popover-header text-center\">' + title + '</h3>';\n        });\n        bodyLines.forEach(function (body, i) {\n          var colors = model.labelColors[i];\n          var styles = 'background-color: ' + colors.backgroundColor;\n          var indicator = '<span class=\"popover-body-indicator\" style=\"' + styles + '\"></span>';\n          var align = bodyLines.length > 1 ? 'justify-content-left' : 'justify-content-center';\n          html += '<div class=\"popover-body d-flex align-items-center ' + align + '\">' + indicator + body + '</div>';\n        });\n        tooltip.innerHTML = html;\n      }\n\n      var canvas = this._chart.canvas;\n      var canvasRect = canvas.getBoundingClientRect();\n      var canvasWidth = canvas.offsetWidth;\n      var canvasHeight = canvas.offsetHeight;\n      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n      var canvasTop = canvasRect.top + scrollTop;\n      var canvasLeft = canvasRect.left + scrollLeft;\n      var tooltipWidth = tooltip.offsetWidth;\n      var tooltipHeight = tooltip.offsetHeight;\n      var top = canvasTop + model.caretY - tooltipHeight - 16;\n      var left = canvasLeft + model.caretX - tooltipWidth / 2;\n      tooltip.style.top = top + 'px';\n      tooltip.style.left = left + 'px';\n      tooltip.style.visibility = 'visible';\n    };\n\n    Chart.defaults.global.tooltips.callbacks.label = function (item, data) {\n      var label = data.datasets[item.datasetIndex].label || '';\n      var yLabel = item.yLabel;\n      var content = '';\n\n      if (data.datasets.length > 1) {\n        content += '<span class=\"popover-body-label mr-auto\">' + label + '</span>';\n      }\n\n      content += '<span class=\"popover-body-value\">' + yLabel + '</span>';\n      return content;\n    }; // Doughnut\n\n\n    Chart.defaults.doughnut.cutoutPercentage = 83;\n\n    Chart.defaults.doughnut.tooltips.callbacks.title = function (item, data) {\n      var title = data.labels[item[0].index];\n      return title;\n    };\n\n    Chart.defaults.doughnut.tooltips.callbacks.label = function (item, data) {\n      var value = data.datasets[0].data[item.index];\n      var content = '';\n      content += '<span class=\"popover-body-value\">' + value + '</span>';\n      return content;\n    };\n\n    Chart.defaults.doughnut.legendCallback = function (chart) {\n      var data = chart.data;\n      var content = '';\n      data.labels.forEach(function (label, index) {\n        var bgColor = data.datasets[0].backgroundColor[index];\n        content += '<span class=\"chart-legend-item\">';\n        content += '<i class=\"chart-legend-indicator\" style=\"background-color: ' + bgColor + '\"></i>';\n        content += label;\n        content += '</span>';\n      });\n      return content;\n    }; // yAxes\n\n\n    Chart.scaleService.updateScaleDefaults('linear', {\n      gridLines: {\n        borderDash: [2],\n        borderDashOffset: [2],\n        color: colors.gray[300],\n        drawBorder: false,\n        drawTicks: false,\n        zeroLineColor: colors.gray[300],\n        zeroLineBorderDash: [2],\n        zeroLineBorderDashOffset: [2]\n      },\n      ticks: {\n        beginAtZero: true,\n        padding: 10,\n        callback: function callback(value) {\n          if (!(value % 10)) {\n            return value;\n          }\n        }\n      }\n    }); // xAxes\n\n    Chart.scaleService.updateScaleDefaults('category', {\n      gridLines: {\n        drawBorder: false,\n        drawOnChartArea: false,\n        drawTicks: false\n      },\n      ticks: {\n        padding: 20\n      },\n      maxBarThickness: 10\n    });\n  }\n\n  function toggleOptions(el) {\n    var target = el.dataset.target;\n    var targetEl = document.querySelector(target);\n    var chart = getChartInstance(targetEl);\n    var options = JSON.parse(el.dataset.add);\n\n    if (el.checked) {\n      pushOptions(chart, options);\n    } else {\n      popOptions(chart, options);\n    }\n\n    chart.update();\n  }\n\n  function updateOptions(el) {\n    var target = el.dataset.target;\n    var targetEl = document.querySelector(target);\n    var chart = getChartInstance(targetEl);\n    var options = JSON.parse(el.dataset.update);\n    var prefix = el.dataset.prefix;\n    var suffix = el.dataset.suffix;\n    parseOptions(chart, options);\n\n    if (prefix || suffix) {\n      toggleTicks(chart, prefix, suffix);\n    }\n\n    chart.update();\n  }\n\n  function parseOptions(chart, options) {\n    for (var item in options) {\n      if (typeof options[item] !== 'object') {\n        chart[item] = options[item];\n      } else {\n        parseOptions(chart[item], options[item]);\n      }\n    }\n  }\n\n  function pushOptions(chart, options) {\n    for (var item in options) {\n      if (Array.isArray(options[item])) {\n        options[item].forEach(function (data) {\n          chart[item].push(data);\n        });\n      } else {\n        pushOptions(chart[item], options[item]);\n      }\n    }\n  }\n\n  function popOptions(chart, options) {\n    for (var item in options) {\n      if (Array.isArray(options[item])) {\n        options[item].forEach(function (data) {\n          chart[item].pop();\n        });\n      } else {\n        popOptions(chart[item], options[item]);\n      }\n    }\n  }\n\n  function toggleTicks(chart, prefix, suffix) {\n    prefix = prefix ? prefix : '';\n    suffix = suffix ? suffix : '';\n\n    chart.options.scales.yAxes[0].ticks.callback = function (value) {\n      if (!(value % 10)) {\n        return prefix + value + suffix;\n      }\n    };\n\n    chart.options.tooltips.callbacks.label = function (item, data) {\n      var label = data.datasets[item.datasetIndex].label || '';\n      var yLabel = item.yLabel;\n      var content = '';\n\n      if (data.datasets.length > 1) {\n        content += '<span class=\"popover-body-label mr-auto\">' + label + '</span>';\n      }\n\n      content += '<span class=\"popover-body-value\">' + prefix + yLabel + suffix + '</span>';\n      return content;\n    };\n  }\n\n  function toggleLegend(el) {\n    var chart = getChartInstance(el);\n    var legend = chart.generateLegend();\n    var target = el.dataset.target;\n    var targetEl = document.querySelector(target);\n    targetEl.innerHTML = legend;\n  }\n\n  function getChartInstance(chart) {\n    var chartInstance = undefined;\n    Chart.helpers.each(Chart.instances, function (instance) {\n      if (chart == instance.chart.canvas) {\n        chartInstance = instance;\n      }\n    });\n    return chartInstance;\n  } //\n  // Events\n  //\n\n\n  if (typeof Chart !== 'undefined') {\n    // Global options\n    globalOptions(); // Toggle chart\n\n    if (toggle) {\n      [].forEach.call(toggle, function (el) {\n        el.addEventListener('change', function () {\n          if (el.dataset.add) {\n            toggleOptions(el);\n          }\n        });\n        el.addEventListener('click', function () {\n          if (el.dataset.update) {\n            updateOptions(el);\n          }\n        });\n      });\n    } // Toggle lenegd\n\n\n    if (legend) {\n      document.addEventListener('DOMContentLoaded', function () {\n        [].forEach.call(legend, function (el) {\n          toggleLegend(el);\n        });\n      });\n    }\n  }\n})();","map":{"version":3,"sources":["/Users/billhewitt/Desktop/Visionotype/perkbox/app/javascript/lib/charts.js"],"names":["colors","gray","primary","black","white","transparent","fonts","base","toggle","document","querySelectorAll","legend","globalOptions","Chart","defaults","global","responsive","maintainAspectRatio","defaultColor","defaultFontColor","defaultFontFamily","defaultFontSize","layout","padding","display","position","labels","usePointStyle","elements","point","radius","backgroundColor","line","tension","borderWidth","borderColor","borderCapStyle","rectangle","arc","hoverBorderColor","tooltips","enabled","mode","intersect","custom","model","tooltip","getElementById","createElement","setAttribute","classList","add","body","appendChild","opacity","style","visibility","getBody","bodyItem","lines","titleLines","title","bodyLines","map","html","forEach","i","labelColors","styles","indicator","align","length","innerHTML","canvas","_chart","canvasRect","getBoundingClientRect","canvasWidth","offsetWidth","canvasHeight","offsetHeight","scrollTop","window","pageYOffset","documentElement","scrollLeft","pageXOffset","canvasTop","top","canvasLeft","left","tooltipWidth","tooltipHeight","caretY","caretX","callbacks","label","item","data","datasets","datasetIndex","yLabel","content","doughnut","cutoutPercentage","index","value","legendCallback","chart","bgColor","scaleService","updateScaleDefaults","gridLines","borderDash","borderDashOffset","color","drawBorder","drawTicks","zeroLineColor","zeroLineBorderDash","zeroLineBorderDashOffset","ticks","beginAtZero","callback","drawOnChartArea","maxBarThickness","toggleOptions","el","target","dataset","targetEl","querySelector","getChartInstance","options","JSON","parse","checked","pushOptions","popOptions","update","updateOptions","prefix","suffix","parseOptions","toggleTicks","Array","isArray","push","pop","scales","yAxes","toggleLegend","generateLegend","chartInstance","undefined","helpers","each","instances","instance","call","addEventListener"],"mappings":"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","sourcesContent":["//\r\n// charts.js\r\n// Theme module\r\n//\r\n\r\n'use strict';\r\n\r\n(function() {\r\n\r\n  //\r\n  // Variables\r\n  //\r\n\r\n  var colors = {\r\n    gray: {\r\n      300: '#E3EBF6',\r\n      600: '#95AAC9',\r\n      700: '#6E84A3',\r\n      800: '#152E4D',\r\n      900: '#283E59'\r\n    },\r\n    primary: {\r\n      100: '#D2DDEC',\r\n      300: '#A6C5F7',\r\n      700: '#2C7BE5',\r\n    },\r\n    black: '#12263F',\r\n    white: '#FFFFFF',\r\n    transparent: 'transparent',\r\n  };\r\n\r\n  var fonts = {\r\n    base: 'Cerebri Sans'\r\n  }\r\n\r\n  var toggle = document.querySelectorAll('[data-toggle=\"chart\"]');\r\n  var legend = document.querySelectorAll('[data-toggle=\"legend\"]');\r\n\r\n\r\n  //\r\n  // Functions\r\n  //\r\n\r\n  function globalOptions() {\r\n\r\n    // Global\r\n\r\n    Chart.defaults.global.responsive = true;\r\n    Chart.defaults.global.maintainAspectRatio = false;\r\n\r\n    // Default\r\n    Chart.defaults.global.defaultColor = colors.gray[600];\r\n    Chart.defaults.global.defaultFontColor = colors.gray[600];\r\n    Chart.defaults.global.defaultFontFamily = fonts.base;\r\n    Chart.defaults.global.defaultFontSize = 13;\r\n\r\n    // Layout\r\n    Chart.defaults.global.layout.padding = 0;\r\n\r\n    // Legend\r\n    Chart.defaults.global.legend.display = false;\r\n    Chart.defaults.global.legend.position = 'bottom';\r\n    Chart.defaults.global.legend.labels.usePointStyle = true;\r\n    Chart.defaults.global.legend.labels.padding = 16;\r\n\r\n    // Point\r\n    Chart.defaults.global.elements.point.radius = 0;\r\n    Chart.defaults.global.elements.point.backgroundColor = colors.primary[700];\r\n\r\n    // Line\r\n    Chart.defaults.global.elements.line.tension = .4;\r\n    Chart.defaults.global.elements.line.borderWidth = 3;\r\n    Chart.defaults.global.elements.line.borderColor = colors.primary[700];\r\n    Chart.defaults.global.elements.line.backgroundColor = colors.transparent;\r\n    Chart.defaults.global.elements.line.borderCapStyle = 'rounded';\r\n\r\n    // Rectangle\r\n    Chart.defaults.global.elements.rectangle.backgroundColor = colors.primary[700];\r\n\r\n    // Arc\r\n    Chart.defaults.global.elements.arc.backgroundColor = colors.primary[700];\r\n    Chart.defaults.global.elements.arc.borderColor = colors.white;\r\n    Chart.defaults.global.elements.arc.borderWidth = 4;\r\n    Chart.defaults.global.elements.arc.hoverBorderColor = colors.white;\r\n\r\n    // Tooltips\r\n    Chart.defaults.global.tooltips.enabled = false;\r\n    Chart.defaults.global.tooltips.mode = 'index';\r\n    Chart.defaults.global.tooltips.intersect = false;\r\n    Chart.defaults.global.tooltips.custom = function(model) {\r\n      var tooltip = document.getElementById('chart-tooltip');\r\n\r\n      if (!tooltip) {\r\n        tooltip = document.createElement('div');\r\n\r\n        tooltip.setAttribute('id', 'chart-tooltip');\r\n        tooltip.setAttribute('role', 'tooltip');\r\n        tooltip.classList.add('popover');\r\n        tooltip.classList.add('bs-popover-top');\r\n        \r\n        document.body.appendChild(tooltip);\r\n      }\r\n\r\n      if (model.opacity === 0) {\r\n        tooltip.style.visibility = 'hidden';\r\n        return;\r\n      }\r\n\r\n      function getBody(bodyItem) {\r\n        return bodyItem.lines;\r\n      }\r\n\r\n      if (model.body) {\r\n        var titleLines = model.title || [];\r\n        var bodyLines = model.body.map(getBody);\r\n        var html = '';\r\n\r\n        html += '<div class=\"arrow\"></div>';\r\n\r\n        titleLines.forEach(function(title) {\r\n          html += '<h3 class=\"popover-header text-center\">' + title + '</h3>';\r\n        });\r\n\r\n        bodyLines.forEach(function(body, i) {\r\n          var colors = model.labelColors[i];\r\n          var styles = 'background-color: ' + colors.backgroundColor;\r\n          var indicator = '<span class=\"popover-body-indicator\" style=\"' + styles + '\"></span>';\r\n          var align = (bodyLines.length > 1) ? 'justify-content-left' : 'justify-content-center';\r\n          \r\n          html += '<div class=\"popover-body d-flex align-items-center ' + align + '\">' + indicator + body + '</div>';\r\n        });\r\n\r\n        tooltip.innerHTML = html;\r\n      }\r\n\r\n      var canvas = this._chart.canvas;\r\n      var canvasRect = canvas.getBoundingClientRect();\r\n\r\n      var canvasWidth = canvas.offsetWidth;\r\n      var canvasHeight = canvas.offsetHeight;\r\n\r\n      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\r\n      var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\r\n\r\n      var canvasTop = canvasRect.top + scrollTop;\r\n      var canvasLeft = canvasRect.left + scrollLeft;\r\n\r\n      var tooltipWidth = tooltip.offsetWidth;\r\n      var tooltipHeight = tooltip.offsetHeight;\r\n\r\n      var top = canvasTop + model.caretY - tooltipHeight - 16;\r\n      var left = canvasLeft + model.caretX - tooltipWidth / 2;\r\n\r\n      tooltip.style.top = top + 'px';\r\n      tooltip.style.left = left + 'px';\r\n      tooltip.style.visibility = 'visible';\r\n\r\n    };\r\n    Chart.defaults.global.tooltips.callbacks.label = function(item, data) {\r\n      var label = data.datasets[item.datasetIndex].label || '';\r\n      var yLabel = item.yLabel;\r\n      var content = ''; \r\n\r\n      if (data.datasets.length > 1) {\r\n        content += '<span class=\"popover-body-label mr-auto\">' + label + '</span>';\r\n      }\r\n\r\n      content += '<span class=\"popover-body-value\">' + yLabel + '</span>';\r\n\r\n      return content;\r\n    };\r\n\r\n    // Doughnut\r\n    Chart.defaults.doughnut.cutoutPercentage = 83;\r\n    Chart.defaults.doughnut.tooltips.callbacks.title = function(item, data) {\r\n      var title = data.labels[item[0].index];\r\n      return title;\r\n    };\r\n    Chart.defaults.doughnut.tooltips.callbacks.label = function(item, data) {\r\n      var value = data.datasets[0].data[item.index];\r\n      var content = '';\r\n\r\n      content += '<span class=\"popover-body-value\">' + value + '</span>';\r\n      return content;\r\n    };\r\n    Chart.defaults.doughnut.legendCallback = function(chart) {\r\n      var data = chart.data;\r\n      var content = '';\r\n\r\n      data.labels.forEach(function(label, index) {\r\n        var bgColor = data.datasets[0].backgroundColor[index];\r\n\r\n        content += '<span class=\"chart-legend-item\">';\r\n        content += '<i class=\"chart-legend-indicator\" style=\"background-color: ' + bgColor + '\"></i>';\r\n        content += label;\r\n        content += '</span>';\r\n      });\r\n\r\n      return content;\r\n    };\r\n\r\n    // yAxes\r\n    Chart.scaleService.updateScaleDefaults('linear', {\r\n      gridLines: {\r\n        borderDash: [2],\r\n        borderDashOffset: [2],\r\n        color: colors.gray[300],\r\n        drawBorder: false,\r\n        drawTicks: false,\r\n        zeroLineColor: colors.gray[300],\r\n        zeroLineBorderDash: [2],\r\n        zeroLineBorderDashOffset: [2]\r\n      },\r\n      ticks: {\r\n        beginAtZero: true,\r\n        padding: 10,\r\n        callback: function(value) {\r\n          if ( !(value % 10) ) {\r\n            return value\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // xAxes\r\n    Chart.scaleService.updateScaleDefaults('category', {\r\n      gridLines: {\r\n        drawBorder: false,\r\n        drawOnChartArea: false,\r\n        drawTicks: false\r\n      },\r\n      ticks: {\r\n        padding: 20\r\n      },\r\n      maxBarThickness: 10\r\n    });\r\n\r\n  }\r\n\r\n  function toggleOptions(el) {\r\n    var target = el.dataset.target;\r\n    var targetEl = document.querySelector(target);\r\n    var chart = getChartInstance(targetEl);\r\n    var options = JSON.parse(el.dataset.add);\r\n\r\n    if (el.checked) {\r\n      pushOptions(chart, options);\r\n    } else {\r\n      popOptions(chart, options);\r\n    }\r\n\r\n    chart.update();\r\n  }\r\n\r\n  function updateOptions(el) {\r\n    var target = el.dataset.target;\r\n    var targetEl = document.querySelector(target);\r\n    var chart = getChartInstance(targetEl);\r\n    var options = JSON.parse(el.dataset.update);\r\n    var prefix = el.dataset.prefix;\r\n    var suffix = el.dataset.suffix;\r\n\r\n    parseOptions(chart, options);\r\n\r\n    if (prefix || suffix) {\r\n      toggleTicks(chart, prefix, suffix);\r\n    }\r\n\r\n    chart.update();\r\n  }\r\n\r\n  function parseOptions(chart, options) {\r\n    for (var item in options) {\r\n      if (typeof options[item] !== 'object') {\r\n        chart[item] = options[item];\r\n      } else {\r\n        parseOptions(chart[item], options[item]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function pushOptions(chart, options) {\r\n    for (var item in options) {\r\n      if (Array.isArray(options[item])) {\r\n        options[item].forEach(function(data) {\r\n          chart[item].push(data);\r\n        });\r\n      } else {\r\n        pushOptions(chart[item], options[item]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function popOptions(chart, options) {\r\n    for (var item in options) {\r\n      if (Array.isArray(options[item])) {\r\n        options[item].forEach(function(data) {\r\n          chart[item].pop();\r\n        });\r\n      } else {\r\n        popOptions(chart[item], options[item]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggleTicks(chart, prefix, suffix) {\r\n    prefix = prefix ? prefix : '';\r\n    suffix = suffix ? suffix : '';\r\n\r\n    chart.options.scales.yAxes[0].ticks.callback = function(value) {\r\n      if ( !(value % 10) ) {\r\n        return prefix + value + suffix;\r\n      }\r\n    }\r\n\r\n    chart.options.tooltips.callbacks.label = function(item, data) {\r\n      var label = data.datasets[item.datasetIndex].label || '';\r\n      var yLabel = item.yLabel;\r\n      var content = '';\r\n\r\n      if (data.datasets.length > 1) {\r\n        content += '<span class=\"popover-body-label mr-auto\">' + label + '</span>';\r\n      }\r\n\r\n      content += '<span class=\"popover-body-value\">' + prefix + yLabel + suffix + '</span>';\r\n      return content;\r\n    }\r\n  }\r\n\r\n  function toggleLegend(el) {\r\n    var chart = getChartInstance(el);\r\n    var legend = chart.generateLegend();\r\n    var target = el.dataset.target;\r\n    var targetEl = document.querySelector(target);\r\n\r\n    targetEl.innerHTML = legend;\r\n  }\r\n\r\n  function getChartInstance(chart) {\r\n    var chartInstance = undefined;\r\n\r\n    Chart.helpers.each(Chart.instances, function(instance) {\r\n      if (chart == instance.chart.canvas) {\r\n        chartInstance = instance;\r\n      }\r\n    });\r\n\r\n    return chartInstance;\r\n  }\r\n\r\n\r\n  //\r\n  // Events\r\n  //\r\n\r\n  if (typeof Chart !== 'undefined') {\r\n\r\n    // Global options\r\n    globalOptions();\r\n\r\n    // Toggle chart\r\n    if (toggle) {\r\n      [].forEach.call(toggle, function(el) {\r\n        el.addEventListener('change', function() {\r\n          if (el.dataset.add) {\r\n            toggleOptions(el);\r\n          }\r\n        });\r\n        el.addEventListener('click', function() {\r\n          if (el.dataset.update) {\r\n            updateOptions(el);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // Toggle lenegd\r\n    if (legend) {\r\n      document.addEventListener('DOMContentLoaded', function() {\r\n        [].forEach.call(legend, function(el) {\r\n          toggleLegend(el);\r\n        });\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n})();"]},"metadata":{},"sourceType":"module"}